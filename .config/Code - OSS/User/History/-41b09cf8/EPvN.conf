############### PaulZenV1.7Alpha

#############################
### SOURCE CONFIGURATIONS ###
#############################
source = /home/$USER/.cache/wal/colors-hyprland
source = ~/.config/hypr/monitors.conf
source = ~/.config/hypr/workspace-rules.conf
source = ~/.config/hypr/workspace-keybinds.conf

###################
### VARIABLES ###
###################
$terminal = kitty
$fileManager = thunar
$menu = ~/.config/rofi/search-app.sh
$appmenu = ~/.config/hypr/scripts/app-grid-launcher.sh 
#$rofi = ~/.config/hypr/scripts/rofi-app-launcher.sh
$rofi = ~/.config/rofi/scripts/zenith/open_app.sh

#################
### AUTOSTART ###
#################

# ── Core session services ─────────────────────────────
exec-once = hypridle
exec-once = waybar
exec-once = swww-daemon
exec-once = swaync
exec-once = pypr
exec-once = swaync-client -df
exec-once = pactl set-sink-mute @DEFAULT_SINK@ 0
exec-once = /usr/lib/polkit-gnome/polkit-gnome-authentication-agent-1

# ── Cursor & GTK watcher ─────────────────────────────
exec-once = hyprctl setcursor Bibata-Modern-Classic 24
exec-once = ~/.config/hypr/scripts/gtk-cursor-watcher.sh

# ── Wallpaper restore ─────────────────────────────────
exec-once = sleep 0.5 && swww restore

# ── Plugin initialization ─────────────────────────────
# Load Hyprexpo early (optional plugin)
#exec-once = hyprctl plugin load "$HYPR_PLUGIN_DIR/lib/libhyprexpo.so"
exec-once = sleep 6 && hyprctl plugin load "$HYPR_PLUGIN_DIR/lib/libhyprspace.so"
# ── Display & workspace setup ─────────────────────────
exec-once = sleep 1 && ~/.config/hypr/scripts/fix-monitor-scale.sh
exec-once = sleep 2 && ~/.config/hypr/scripts/setup-all.sh

# ── Dock launcher ─────────────────────────────────────
exec-once = ~/.config/hypr/scripts/dock-launcher.sh

# ── Plugin refresh (Hyprpm) ───────────────────────────
exec-once = sleep 2 && hyprpm reload -n


# ── Hyprspace overview keybinds (delayed to avoid "does not exist") ───────────
# Delay keybinding until Hyprspace is ready
#exec-once = sleep 3 && hyprctl keyword bind "SUPER, TAB, overview:toggle"
#exec-once = sleep 3 && hyprctl keyword bind "SUPER, ESCAPE, overview:close"


# (Legacy alternative lines kept for reference)
#exec-once = sleep 6 && hyprctl dispatch bind SUPER TAB overview:toggle
#exec-once = sleep 6 && hyprctl dispatch bind SUPER ESCAPE overview:close



#############################
### ENVIRONMENT VARIABLES ###
#############################
env = ELECTRON_OZONE_PLATFORM_HINT,wayland
env = XCURSOR_THEME,Bibata-Modern-Classic
env = XCURSOR_SIZE,32
env = HYPRCURSOR_THEME,Bibata-Modern-Classic
env = HYPRCURSOR_SIZE,32

#####################
### LOOK AND FEEL ###
#####################
general { 
    gaps_in = 10
    gaps_out = 10
    border_size = 0
    col.active_border = $color9
    col.inactive_border = $color5
    resize_on_border = true
    allow_tearing = false
    layout = dwindle
}

decoration { 
    rounding = 13
    active_opacity = 1
    inactive_opacity = 0.90
    fullscreen_opacity = 1
    
    blur {
        enabled = true
        size = 15
        passes = 2
        new_optimizations = true
        ignore_opacity = false
        xray = false
        
        # Premium glass settings
        noise = 0.01
        contrast = 1.15
        brightness = 1.05
        vibrancy = 0.35
        vibrancy_darkness = 0.4
        
        # Blur layershell and popups
        popups = true
        popups_ignorealpha = 0.5
    }
    
    shadow {
        enabled = true
        range = 15
        render_power = 5
        color = rgba(0,0,0,.5)
    }
}

animations {
    enabled = true
    bezier = fluid, 0.15, 0.85, 0.25, 1
    bezier = snappy, 0.3, 1, 0.4, 1
    animation = windows, 1, 3, fluid, popin 5%
    animation = windowsOut, 1, 2.5, snappy
    animation = fade, 1, 4, snappy
    animation = workspaces, 1, 1.7, snappy, slide
    animation = specialWorkspace, 1, 4, fluid, slidefadevert -35%
    animation = layers, 1, 2, snappy, popin 70%
}

dwindle {
    preserve_split = true
}

misc { 
    force_default_wallpaper = -1
    disable_hyprland_logo = true
    focus_on_activate = true
}

#############
### INPUT ###
#############
input {
    kb_layout = us
    follow_mouse = 1
    sensitivity = 0
    
    touchpad {
        natural_scroll = true
    } 
}

device {
    name = epic-mouse-v1
    sensitivity = 0
}

###################
### KEYBINDINGS ###
###################
$mainMod = SUPER

######################
### WINDOW MANAGEMENT
######################
bind = $mainMod, Q, killactive
bind = $mainMod, B, exec, $terminal
bind = $mainMod, E, exec, $fileManager
bind = $mainMod, V, togglefloating  
bind = $mainMod, P, pseudo
bind = $mainMod, J, togglesplit
bind = $mainMod, F, fullscreen, 1
bind = $mainMod SHIFT, F, fullscreen, 0
bind = $mainMod SHIFT, Z, exec, hyprctl dispatch workspaceopt allfloat
bind = $mainMod, M, exit

# Apply cursor 
bind = $mainMod SHIFT, C, exec, ~/.config/hypr/scripts/apply-cursor.sh

################
### LAUNCHERS
################
bind = $mainMod, R, exec, $rofi
bind = ALT, space, exec, $rofi

####################
### FOCUS MOVEMENT
####################
bind = $mainMod, left, movefocus, l
bind = $mainMod, right, movefocus, r
bind = $mainMod, up, movefocus, u
bind = $mainMod, down, movefocus, d

#####################
### WINDOW MOVEMENT
#####################
bind = ALT, left, movewindow, l
bind = ALT, right, movewindow, r
bind = ALT, up, movewindow, u
bind = ALT, down, movewindow, d

#####################
### PYPR SCRATCHPADS
#####################
bind = $mainMod, SPACE, exec, pypr toggle term
bind = $mainMod, G, exec, pypr toggle music
bind = $mainMod, T, exec, pypr toggle taskbar

#############################
### SYSTEM SETTINGS ###
#############################
bind = $mainMod SHIFT, A, exec, ~/.config/hypr/scripts/system-settings-v2.sh
bind = $mainMod SHIFT, O, exec, ~/.config/hypr/scripts/opacity-settings.sh
bind = $mainMod SHIFT, W, exec, ~/.config/wlogout/toggle-wallpaper.sh
bind = $mainMod SHIFT, K, exec, ~/.config/hypr/scripts/keybinding-viewer-interactive.sh
bind = $mainMod SHIFT, D, exec, ~/.config/hypr/scripts/nwg-display-wrapper.sh

####################
### SYSTEM TOOLS ###
####################
bind = $mainMod, L, exec, hyprlock
bind = $mainMod, D, exec, ~/.config/hypr/scripts/dock-manager.sh toggle

#####################
### SCREENSHOTS ###
#####################
bind = CTRL, Print, exec, hyprshot -m region -o ~/Screenshots/
bind = , Print, exec, hyprshot -m window -o ~/Screenshots/
bind = ALT, Print, exec, hyprshot -m active -m output -o ~/Screenshots/

#############################
### CUSTOM SCRIPTS ###
#############################
bind = ALT, w, exec, ~/.config/hypr/wallpaper.sh
bind = ALT, a, exec, ~/.config/waybar/scripts/refresh.sh
bind = ALT, B, exec, ~/.config/waybar/scripts/select.sh
bind = ALT, r, exec, ~/.config/swaync/refresh.sh

######################
### MEDIA CONTROLS ###
######################
bindel = ,XF86AudioRaiseVolume, exec, wpctl set-volume @DEFAULT_AUDIO_SINK@ 5%+
bindel = ,XF86AudioLowerVolume, exec, wpctl set-volume @DEFAULT_AUDIO_SINK@ 5%-
bindel = ,XF86AudioMute, exec, wpctl set-mute @DEFAULT_AUDIO_SINK@ toggle
bindel = ,XF86AudioMicMute, exec, wpctl set-mute @DEFAULT_AUDIO_SOURCE@ toggle
bindel = ,XF86MonBrightnessUp, exec, brightnessctl s 10%+
bindel = ,XF86MonBrightnessDown, exec, brightnessctl s 10%-
bindl = , XF86AudioNext, exec, playerctl next
bindl = , XF86AudioPause, exec, playerctl play-pause
bindl = , XF86AudioPlay, exec, playerctl play-pause
bindl = , XF86AudioPrev, exec, playerctl previous

######################
### HYPRBARS CONTROLS
######################
bind = $mainMod SHIFT, M, exec, ~/.config/hypr/scripts/hyprbars-minimize.sh
bind = $mainMod CTRL, M, exec, ~/.config/hypr/scripts/hyprbars-restore-menu.sh
bind = $mainMod SHIFT CTRL, M, exec, ~/.config/hypr/scripts/hyprbars-restore-all.sh

####################
### POWER MENU ###
####################
#bind = ALT, TAB, exec, ~/.config/hypr/scripts/power-menu.sh

####################
### DOCK PROTOTYPE TILING ON AND OFF ###
####################
#bind = $mainMod SHIFT, X, exec, ~/.config/hypr/scripts/dock-manager.sh float
#bind = $mainMod SHIFT, Z, exec, ~/.config/hypr/scripts/dock-manager.sh tiling

################
### WORKSPACES - DYNAMIC CONFIGURATION
################
# Workspace numbering: 1-10 per monitor
# Each monitor has its own set of workspaces 1-10
#
# Keybinds:
# - Super+1-9, Super+0 (workspace 10) - Switch workspace on current monitor
# - Super+Shift+1-0 - Move window to workspace on current monitor
# - Super+Ctrl+Left/Right - Cycle workspaces on current monitor
# - Super+Period/Comma - Switch between monitors
#
# Configuration files (auto-generated):
# - ~/.config/hypr/workspace-rules.conf (workspace definitions)
# - ~/.config/hypr/workspace-keybinds.conf (all workspace keybinds)
#
# To regenerate: ~/.config/hypr/scripts/setup-all.sh

# Monitor navigation
#bind = $mainMod, period, focusmonitor, +1
#bind = $mainMod, comma, focusmonitor, -1
#bind = $mainMod SHIFT, period, movecurrentworkspacetomonitor, +1
#bind = $mainMod SHIFT, comma, movecurrentworkspacetomonitor, -1


# Toggle overview
#bind = SUPER, TAB, overview:toggle
#bind = SUPER, ESCAPE, overview:close
bind = SUPER, TAB, workspace, e+1  # next workspace
bind = SUPER SHIFT, TAB, workspace, e-1  # previous workspace


#bind = SUPER, TAB, overview:toggle
#bind = SUPER, ESCAPE, overview:close
######################
### MOUSE BINDINGS ###
######################
bindm = $mainMod, mouse:272, movewindow
bindm = $mainMod, mouse:273, resizewindow

###################
### LAYER RULES ###
###################
# Waybar
#layerrule = blur, waybar
#layerrule = ignorezero, waybar
#layerrule = ignorealpha[0.5], waybar

# SwayNC
#layerrule = blur, swaync-control-center
#layerrule = blur, swaync-notification-window
#layerrule = ignorezero, swaync-control-center
#layerrule = ignorezero, swaync-notification-window
#layerrule = ignorealpha[0.5], swaync-control-center
#layerrule = ignorealpha[0.5], swaync-notification-window

# Wlogout
#layerrule = blur, wlogout
#layerrule = ignorezero, wlogout
#layerrule = ignorealpha[0.5], wlogout

# Selection
#layerrule = noanim, selection

# Dock layer rules
#layerrule = blur, nwg-dock-hyprland
#layerrule = ignorezero, nwg-dock-hyprland
#layerrule = ignorealpha[0.5], nwg-dock-hyprland
#layerrule = animation slide, nwg-dock-hyprland

# Rofi
#layerrule = blur, RofiSystem
#layerrule = ignorealpha[0.5], Rofi*
#layerrule = blur, Rofi*

####################
### WINDOW RULES ###
####################
#windowrulev2 = opacity 0.7 0.7,class:^(Rofi)$
#windowrulev2 = opacity 0.75 0.75,class:^(org.wezfurlong.wezterm)$

# Auto-hide waybar and dock on fullscreen
#windowrulev2 = fullscreen, fullscreen:1

# Hyprland Control Center
windowrulev2 = float, class:^(com.example.HyprControl)$
windowrulev2 = center, class:^(com.example.HyprControl)$
windowrulev2 = size 900 600, class:^(com.example.HyprControl)$




################
### PLUGINS ###
################
plugin {
    hyprpm {
        permission = /usr/(bin|local/bin)/hyprpm, plugin, allow
    }
    hyprbars {
        # Bar settings
        bar_height = 28
        bar_precedence_over_border = true
        bar_part_of_window = true
        
        # Glass effect colors (updated by pywal)
        bar_color = rgba(1e1c0ccc)
        col.text = rgb(c6c6c2)
        bar_blur = true
        
        # Font settings
        bar_text_font = SF Pro Display Semibold
        bar_text_size = 13
        bar_text_align = center
        bar_text_enabled = false
        bar_buttons_alignment = left
        
        # Padding
        bar_padding = 20
        bar_button_padding = 10
        
        # macOS-style buttons
        hyprbars-button = rgb(ff5f56), 17, , hyprctl dispatch killactive
        hyprbars-button = rgb(ffbd2e), 17, , ~/.config/hypr/scripts/hyprbars-minimize.sh
        hyprbars-button = rgb(27c93f), 17, , hyprctl dispatch fullscreen 1
        
        on_double_click = hyprctl dispatch fullscreen 1
    }
    hyprtrails {
        color = rgba(0b101bcc)
    }
    hyprspace {
        # Workspace spacing sa overview
        overview_gapsout = 20
        overview_gapsin = 10
        
        # Number of columns sa overview
        overview_columns = 3
        
        # Auto-close overview after selecting workspace
        overview_autohide = true
        
        # Show workspace names
        overview_show_names = true
    }

    borders-plus-plus {
        add_borders = 1 # 0 - 9

        # you can add up to 9 borders
        col.border_1 = rgba(0b101bcc)
        col.border_2 = rgb(2222ff)

        # -1 means "default" as in the one defined in general:border_size
        border_size_1 = 2
        border_size_2 = -1

        # makes outer edges match rounding of the parent. Turn on / off to better understand. Default = on.
        natural_rounding = yes
    }
}